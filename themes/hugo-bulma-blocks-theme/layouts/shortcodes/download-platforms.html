<div id="download-section" style="display: none">
    <h1>Download QGIS for your platform</h1>
    <div id="primary-os"></div>

    <h2>Other platforms</h2>

    <div class="spoiler" id="download-win">
        <h4 class="spoiler-label">Download for Windows</h4>
        <div class="content">
            <a href="https://qgis.org/downloads/QGIS-OSGeo4W-3.34.3-1.msi">
                <button class="button is-info">Download QGIS 3.34</button>
            </a>
            <a href="https://qgis.org/downloads/QGIS-OSGeo4W-3.28.15-1.msi">
                <button class="button is-info is-outlined">QGIS 3.28 LTR</button>
            </a>
            <br>
            <br>
            <a class="button" href="alldownloads.html#osgeo4w-installer">OSGeo4W Network Installer</a>
            <p>The OSGeo4W installer is recommended for regular users or organization deployments. <em>It allows to have several QGIS versions in one place, and to keep each component up-to-date individually without having to download the whole package.</em><br>
            <br>
            <small>Since QGIS 3.20 we only ship 64-bit Windows executables.</small></p>
        </div>
    </div>

    <div class="spoiler" id="download-mac">
        <h4 class="spoiler-label">Download for macOS</h4>
        <div class="content">
            <p><b><em>After installing QGIS, the first launch attempt may fail due to security protections. To enable QGIS, control-click on its icon in your Applications folder and select Open in the context menu. A confirmation dialog will display where you need to click the Open button again. This only has to be done once.</em></b>
            </p>
            <a href="https://qgis.org/downloads/macos/qgis-macos-pr.dmg">
                <button class="button is-info">Long Term Version for Mac OS (3.28 LTR)</button>
            </a>
            <a href="https://qgis.org/downloads/macos/qgis-macos-pr.dmg">
                <button class="button is-info is-outlined">Latest version for Mac OS (3.34)</button>
            </a>
        </div>
    </div>

    <div class="spoiler" id="download-linux">
        <h4 class="spoiler-label">Download for Linux</h4>
        <div class="content">
            <p>For many flavors of GNU/Linux binary packages (rpm and deb) or software repositories (to add to your installation manager) are available. Please select your choice of distro below:</p>
            <ul>
            <li><a href="alldownloads.html#debian-ubuntu">Debian/Ubuntu</a></li>
            <li><a href="alldownloads.html#fedora">Fedora</a></li>
            <li><a href="alldownloads.html#suse-opensuse">openSUSE</a></li>
            <li><a href="alldownloads.html#mandriva">Mandriva</a></li>
            <li><a href="alldownloads.html#slackware">Slackware</a></li>
            <li><a href="alldownloads.html#arch-linux">Arch Linux</a></li>
            <li><a href="alldownloads.html#flatpak">Flatpak</a></li>
            <li><a href="alldownloads.html#spack">Spack</a></li>
            </ul>
            <p><a href="alldownloads.html#linux">Linux Installation Instructions</a></p>
        </div>
    </div>

    <div class="spoiler" id="download-bsd">
        <h4 class="spoiler-label">Download for BSD</h4>
        <div class="content">
            <p><a href="alldownloads.html#freebsd">BSD Installation Instructions</a></p>
        </div>
    </div>

    <div class="spoiler" id="download-mobile">
        <h4 class="spoiler-label">Apps for mobile and tablet</h4>
        <div class="content">
            <p>The QGIS experience does not stop on the desktop. Various touch optimized apps allow you to take QGIS into the field</p>
            <h5>Third-party touch optimized apps</h5>
            <a href="https://qfield.org">QField (Android, iOS, Windows, macOS, Linux)</a>
            <div>
                <a href="https://play.google.com/store/apps/details?id=ch.opengis.qfield&amp;utm_source=qgis.org"><img alt="Get it on Google Play" src="{{ absURL "img/app_download_play_store.png" }}"></a>
                <a href="https://apps.apple.com/app/qfield-for-qgis/id1531726814"><img alt="Get it for iOS" src="{{ absURL "img/app_download_apple_store.png" }}"></a>
                <a href="https://qfield.org/get_latest/?platform=windows"><img alt="Get it for Windows" src="{{ absURL "img/app_download_windows.png" }}"></a>
                <a href="https://www.github.com/opengisch/qfield/releases"><img alt="Get it on GitHub" src="{{ absURL "img/app_download_gh.png" }}"></a>
            </div>
            <a href="https://merginmaps.com/">Mergin Maps Input app (available for Android, iOS and Windows devices)</a>
            <div>
                <a href="https://play.google.com/store/apps/details?id=uk.co.lutraconsulting&amp;utm_source=qgis.org"><img alt="Get it on Google Play" src="{{ absURL "img/app_download_play_store.png" }}"></a>
                <a href="https://apps.apple.com/us/app/input/id1478603559"><img alt="Get it for iOS" src="{{ absURL "img/app_download_apple_store.png" }}"></a>
                <a href="https://www.github.com/MerginMaps/input/releases"><img alt="Get it for Windows" src="{{ absURL "img/app_download_windows.png" }}"></a>
                <a href="https://www.github.com/MerginMaps/input/releases"><img alt="Get it on GitHub" src="{{ absURL "img/app_download_gh.png" }}"></a>
            </div>
            <a href="https://roam-docs.readthedocs.io">IntraMaps Roam</a>
            <div>
                <a href="https://github.com/roam-qgis/Roam/releases"><img alt="Get it for Windows" src="{{ absURL "img/app_download_windows.png" }}"></a>
                <a href="https://github.com/roam-qgis/Roam/releases"><img alt="Get it on GitHub" src="{{ absURL "img/app_download_gh.png" }}"></a>
            </div>
            <h5>QGIS for Android</h5>
            <p>An old and deprecated not touch optimised release of QGIS for Android can be found in <a href="alldownloads.html#android">All downloads</a></p>
        </div>
    </div>

    <div class="spoiler">
        <h4 class="spoiler-label">Sources</h4>
        <div class="content">
            <p>QGIS is open source software available under the terms of the <b>GNU General Public License</b> meaning that its source code can be downloaded through tarballs or the git repository.</p>
            <p>QGIS Source Code is available
                <a href="https://qgis.org/downloads/qgis-latest.tar.bz2">here (latest release)</a>
                and
                <a href="https://qgis.org/downloads/qgis-latest-ltr.tar.bz2">here (long term release)</a></p>
            <p>Refer to the INSTALL guide on how to compile QGIS from source for the different platforms: <a href="https://github.com/qgis/QGIS/blob/master/INSTALL.md" class="reference external">here</a></p>
        </div>
    </div>
</div>

<script>
function hidePrompt() {
    document.getElementById('donate-prompt').remove();
    document.getElementById('hide-donate-prompt').remove();
    localStorage.setItem('donatePromptClosed', true);
    document.getElementById('download-section').style.display = 'block';
}

function detectOS() {
    const userAgent = navigator.userAgent.toLowerCase();

    if (/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(userAgent)) {
        return 'download-mobile';
    } else if (userAgent.includes('mac')) {
        return 'download-mac';
    } else if (userAgent.includes('linux')) {
        return 'download-linux';
    }
    return 'download-win';
}

if (localStorage.getItem('donatePromptClosed') === 'true') {
    document.getElementById('download-section').style.display = 'block';
    document.getElementById('donate-prompt').remove();
    document.getElementById('hide-donate-prompt').remove();
}

const userOS = detectOS();
document.getElementById('primary-os').appendChild(
    document.getElementById(userOS).querySelector('.content'));
document.getElementById(userOS).remove();

var spoilerLabels = document.querySelectorAll('.spoiler-label');
spoilerLabels.forEach(function(label) {
    label.addEventListener('click', function() {
        var content = this.parentElement.querySelector('.content');
        content.classList.toggle('active');
    });
});

</script>
